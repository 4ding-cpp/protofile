syntax = "proto3";

package ding4;

option go_package = "github.com/4ding-cp/4dingsite/ptypes/drpc";

import "pingpong.proto";
import "sql.proto";
import "customer.proto";
import "car.proto";
import "activity-coupon.proto";
import "adapter.proto";
import "order.proto";
import "freeback.proto";

service ShopRPC {
    rpc Ping(PingPong) returns (PingPong);

    // 登入先輸入 Email 或 Phone 檢查帳號是否存在
    rpc SignIn(Customer) returns (Response);
    // 帳號不存在的話就用這個建立帳號輸入 Email 及 Password
    rpc SignUp(Customer) returns (Response);

    // 初始畫面 LOGO MENU FOOTER 首頁布局
    rpc IndexWebsite(Query) returns (Response);
    // 自訂頁面內容
    rpc FindWebPage(Query) returns (Response);

    // 商品類別
    rpc FindProductClass(Query) returns (Response);
    // 商品列表
    rpc FindProduct(Query) returns (Response);

    // 兌換折價券
    rpc ExchangeCoupon(Coupon) returns (Response);

    // 取得購物車
    rpc FindCar(Query) returns (Response);
    // State => 1.選購 2.鎖定 3.取消 6.完成訂單
    // 計算購物車內容 *包含活動及折價券*
    rpc CompleteCar(Car) returns (Response);
    // 鎖定購物車
    rpc LockCar(Car) returns (Response);
    // 清空購物車
    rpc DeleteCar(Car) returns (Response);

    // 查看付款方式
    rpc FindPayment(Query) returns (Response);
    // 查看物流方式
    rpc FindLogistics(Query) returns (Response);
    // 選擇超商門市
    rpc ChooseCVSStore(Adapter) returns (Response);
    // 取得超商門市資訊
    rpc GetCVSStore(Logistics) returns (Response);

    // 建立訂單
    rpc CreateOrder(Order) returns (Response);
    // 取消訂單 state < 3 未付款前能取消
    rpc CancelOrder(Order) returns (Response);
    // 消費紀錄
    rpc FindOrder(Query) returns (Response);
    

    // 回饋
    rpc CreateFreeback(Freeback) returns (Response);
    rpc ReadFreeback(Freeback) returns (Response);
    rpc AppendFreeback(Dialogue) returns (Response);
    rpc FindFreeback(Query) returns (Response);

    // 金物流方式
    rpc FindExternal(Query) returns (Response);
}