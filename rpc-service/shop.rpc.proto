syntax = "proto3";

package ding4;

option go_package = "github.com/4ding-cp/4dingsite/ptypes/drpc";

import "sql.proto";
import "customer.proto";
import "car.proto";
import "order.proto";

service ShopRPC {
    // 登入先輸入 Email 或 Phone 檢查帳號是否存在
    rpc SignIn(Customer) returns (Response);
    // 帳號存在的話再送剛剛驗證的 Email 或 Phone 及 Password
    rpc SignPassword(Customer) returns (Response);
    // 帳號不存在的話就用這個建立帳號輸入 Email 及 Password
    rpc SignUp(Customer) returns (Response);

    // 撈LOGO 及 favicon 
    rpc IndexBase(Query) returns (Response);
    // 菜單按鈕
    rpc IndexItem(Query) returns (Response);
    // 首頁布局
    rpc IndexLayout(Query) returns (Response);

    // 商品類別
    rpc FindProductClass(Query) returns (Response);
    // 商品列表
    rpc FindProductF(Query) returns (Response);
    // 商品規格
    rpc FindProductSpec(Query) returns (Response);
    // 商品庫存
    rpc FindProductStack(Query) returns (Response);
    // 商品規格庫存
    rpc FindSpecStack(Query) returns (Response);

    // 取的購物車編號
    rpc MyCar(Query) returns (Response);
    // 移除購物車
    rpc DeleteCar(Car) returns (Response);
    // 計算購物車 (套用活動回傳結果)
    rpc CompleteCar(Car) returns (Response);
    // 增加商品至購物車
    rpc AppendCommodity(Car) returns (Response);
    // 移除購物車內的商品
    rpc SubtractCommodity(Commodity) returns (Response);
    // 購物車使用的折價券
    rpc AppendDiscount(Car) returns (Response);
    // 刪除購物車使用的折價券
    rpc SubtractDiscount(Car) returns (Response);

    // 建立訂單
    rpc CreateOrder(Order) returns (Response);
    // 付款
    rpc PaymentOrder(Order) returns (Response);
    // 消費紀錄
    rpc FindOrder(Query) returns (Response);
}